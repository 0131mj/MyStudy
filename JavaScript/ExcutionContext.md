# 실행 컨텍스트

```javascript
function b(){
	console.log('b');    
}

function a(){
    console.log('a');
    b();
    console.log('a2');
}

a();


/* 출력순서
	a
	b
	a2
*/
```

일단, 코드를 보자. 세 부분으로 되어 있는데 b함수, a함수가 있고 마지막으로 a();가 있다.  

코드 실행이 시작되면, 첫 줄에서 function b가 선언되어 있지만, 이건 그냥 선언만 된거라 자바스크립트 엔진은 '아 그래?' 하고 쓩 지나간다. function a 도 마찬가지로 쓩 하고 한번 더 지나간다. 마침내 a(); 를 만나면 '아 날보고 뭘 실행하라구나' 라는 걸 알고 그제서야 a를 찾는다. 

a를 찾아서 실행을 시작하는데 a코드블럭 내부에서 시키는 대로 콘솔에 'a'를 한번 띡 찍어주고나니 다음 줄에선 b를 실행하란다. 그래서 또 b를 찾으러 가서 이번엔 b에서 시키는대로 콘솔에 'b'를 출력한다. 그걸 다하고 다시.... a가 시키는대로 돌아와서 'a2'도 콘솔에 찍어주고나면 그제서야 비로소 a를 실행하라는 명령에 대한 소임이 끝나는 것이다. 

당연한 얘기지만, 255줄짜리 코드가 주어졌을 때 자바스크립트 엔진은 1번줄부터 255번줄까지 코드를 한줄한줄 순서대로 실행하지 않는다. 'a'라는 함수가 호출되면 함수의 영역으로 이동해서 함수를 실행하고, 그 a함수를 실행하다가도 또 안에서 b라는 다른 함수가 나오면 b함수를 실행하는 식으로 일이 진행된다. 

이런 실행이 되는 기준을 (다른 언어는 어떤지 모르겠지만) 자바스크립트에서는 "실행 컨텍스트"라는 이름으로 명명해놓았다. 한마디로 실행 컨텍스트란, 지금 어떤 레벨에서 코드가 실행되고 있는가를 정리해놓은 룰이다.  



## 실행컨텍스트의 개념

보다 정돈된 표현으로 정의해보면 실행 컨텍스트란, 다음과 같다. 

- 실행 가능한 코드를 형상화 하고 구분하는 추상적인 개념
- 실행 가능한 자바스크립트 코드 블록이 실행되는 환경
- 현재 실행되는 컨텍스트에서 이 컨텍스트와 관련없는 실행코드가 실행되면, 새로운 컨텍스트가 생성되어 스택에 들어가고 제어권이 그 컨텍스트로 이동한다. 

실행 컨텍스트에서는 a컨텍스트에서 b컨텍스트로 '이동' 한다기보단 한줄 한줄 '쌓이는' 스택 개념으로 본다. 

무슨 말이냐면, "쌓이긴 뭐가 쌓여?" 라고 할게 아니라, "아까 시켜놓은게 다 끝나지 않았으니, 새로 들어온 이거 먼저 처리하고 쌓인거 나중에 처리할께" 라는 개념으로 보면 된다. 



## 실행 컨텍스트 수행순서

자바스크립트의 실행 컨텍스트는 아래의 순서대로 수행된다.

1. 활성객체 생성 : 엔진 내부에서 접근가능. (사용자 접근 불가)
2. arguments 객체 생성
3. 스코프 정보 생성
4. 변수 생성
5. this 바인딩
6. 코드 실행



컨텍스트와 스코프라는 용어가 헷갈린다.

